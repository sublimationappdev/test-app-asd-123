(function(){"use strict";const yt=r=>{const l=r*180/Math.PI;return parseFloat(l.toFixed(1))},vt=r=>r*Math.PI/180,K=r=>{const{top_diameter:l,bottom_diameter:c,height:_,gap_angle:n}=r,s=l,i=c,d=_,x=Math.sqrt(Math.pow(s,2)/4+Math.pow(s*d/(s-i),2)),o=Math.sqrt(Math.pow(i,2)/4+Math.pow(i*d/(s-i),2)),M=Math.PI*s/x,v=M*180/Math.PI,k=n/360*v,z=vt(k);return{R:x,r:o,fi_rad:M,gap_rad:z}},Q=r=>{const{R:l,r:c,fi_rad:_,gap_rad:n}=K(r),s=_-n,i=l*Math.sin(s/2)*2,d=l-c*Math.cos(s/2);return{width:i,height:d}};function ot(r,l,c="xMid",_="YMid"){if(l.width<=0||l.height<=0)return{x:r.x,y:r.y,width:0,height:0,scale:0};if(r.width<=0||r.height<=0)return{x:r.x,y:r.y,width:0,height:0,scale:0};const n=r.width/r.height,s=l.width/l.height;let i,d,x;s>n?(i=r.width/l.width,d=r.width,x=l.height*i):(i=r.height/l.height,d=l.width*i,x=r.height);let o,M;switch(c){case"xMin":o=r.x;break;case"xMax":o=r.x+r.width-d;break;default:o=r.x+(r.width-d)/2;break}switch(_){case"YMin":M=r.y;break;case"YMax":M=r.y+r.height-x;break;default:M=r.y+(r.height-x)/2;break}return{x:Math.round(o*1e3)/1e3,y:Math.round(M*1e3)/1e3,width:Math.round(d*1e3)/1e3,height:Math.round(x*1e3)/1e3,scale:Math.round(i*1e3)/1e3}}function st(r){return typeof r!="string"?!1:(r=r.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(r)&&/[\dz]$/i.test(r)&&r.length>4))}function Mt(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var G,ht;function xt(){if(ht)return G;ht=1;var r=[];return r[97]=7,r[99]=6,r[104]=1,r[108]=2,r[109]=2,r[113]=4,r[115]=4,r[116]=2,r[118]=1,r[122]=0,G=function(c){var _=c.length,n,s,i,d,x=0,o=!1,M="",v,k=!1,z=!1,t=[],e=[],h=[];function p(f){h.push({position:n,segment:t.length+1,message:f})}for(n=0;n<=_;n++)if(s=c[n]||"z",i=s.toLowerCase().charCodeAt(0),!(48<=i&&i<=57&&(M+=s,o=!0,e[0]!=="A"&&e[0]!=="a"||i>49||x<3||x>4))){if((i===45||i===43)&&(!o||z&&M[M.length-1]==="e")){M+=s,o=!0;continue}if(i===46&&!k&&!z){M+=s,o=!0,k=!0;continue}if(i===101&&o&&!isNaN(M)){M+="e",o=!0,z=!0;continue}if(o&&(d?(v=+M,isNaN(M)?p("Bad formated number ["+M+"]. I'll ignore it."):(e.push(v),x++)):p("Non expected number ["+M+"] at this place. I'll ignore it."),M="",o=z=k=!1),x===d&&e.length)switch((e[0]==="A"||e[0]==="a")&&(e[4]=e[4]?1:0,e[5]=e[5]?1:0),t.length===0&&e[0]!=="m"&&e[0]!=="M"&&(p("The path must start with M or m. I add 'M 0 0' for you."),t.push(["M",0,0])),t.push(e),x=0,e[0]){case"M":e=["L"];break;case"m":e=["l"];break;case"Z":case"z":e=[];break;default:e=[e[0]]}if(!(i===32||i===9||i===10||i===13||i===44)){if(i===43||i===45||i===46){M=s,k=i===46,o=!0;continue}if(!r.hasOwnProperty(i)){p("Non expected character ["+s+"]. I'll ignore it.");continue}d=r[i],e.length>1&&p("Non complete segment ["+e.join(" ")+"]. I'll ignore it."),e=[s],x=0}}return e.length>1&&p("Non complete segment ["+e.join(" ")+"] (at the end of the path). I'll ignore it."),{errs:h,segments:t}},G}var J,ct;function ut(){if(ct)return J;ct=1;function r(c,_){return[c[0]*_[0]+c[2]*_[1],c[1]*_[0]+c[3]*_[1],c[0]*_[2]+c[2]*_[3],c[1]*_[2]+c[3]*_[3],c[0]*_[4]+c[2]*_[5]+c[4],c[1]*_[4]+c[3]*_[5]+c[5]]}function l(c){if(!(this instanceof l))return new l(c);if(!c)c=[];else switch(c.constructor){case String:c=c.trim().split(/\s+/).map(parseFloat);break;case l:c=c.toArray();break;case Array:break;default:c=[]}this.matrix=c.slice().concat([1,0,0,1,0,0].slice(c.length))}return l.prototype.copy=function(c){return new l(this.matrix)},l.prototype.isIdentity=function(c){return c?(this.matrix[0]-1)*(this.matrix[0]-1)+this.matrix[1]*this.matrix[1]+this.matrix[2]*this.matrix[2]+(this.matrix[3]-1)*(this.matrix[3]-1)+this.matrix[4]*this.matrix[4]+this.matrix[5]*this.matrix[5]<c:this.matrix[0]===1&&this.matrix[1]===0&&this.matrix[2]===0&&this.matrix[3]===1&&this.matrix[4]===0&&this.matrix[5]===0},l.prototype.preserveH=function(){return!this.matrix[1]},l.prototype.preserveV=function(){return!this.matrix[2]},l.prototype.det=function(){return this.matrix[0]*this.matrix[3]-this.matrix[1]*this.matrix[2]},l.prototype.reset=function(){return this.matrix=[1,0,0,1,0,0],this},l.prototype.compose=function(c){return(!c||c.constructor!==l)&&(c=new l(c)),c.isIdentity()?this:(this.matrix=r(c.matrix,this.matrix),this)},l.prototype.translate=function(c,_){return this.matrix[4]+=c,this.matrix[5]+=_,this},l.prototype.scale=function(c,_){return(c!==1||_!==1)&&(this.matrix[0]*=c,this.matrix[2]*=c,this.matrix[4]*=c,this.matrix[1]*=_,this.matrix[3]*=_,this.matrix[5]*=_),this},l.prototype.rotate=function(c,_,n){var s,i,d;return c!==0&&(s=c*Math.PI/180,i=Math.cos(s),d=Math.sin(s),this.translate(-_,-n).compose([i,d,-d,i,0,0]).translate(_,n)),this},l.prototype.skewX=function(c){return c!==0&&this.compose([1,0,Math.tan(c*Math.PI/180),1,0,0]),this},l.prototype.skewY=function(c){return c!==0&&this.compose([1,Math.tan(c*Math.PI/180),0,1,0,0]),this},l.prototype.toArray=function(){return this.matrix},l.prototype.calc=function(c,_,n){return[this.matrix[0]*c+this.matrix[2]*_+(n?0:this.matrix[4]),this.matrix[1]*c+this.matrix[3]*_+(n?0:this.matrix[5])]},J=l,J}var j,pt;function bt(){if(pt)return j;pt=1;var r=ut(),l={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},c=/\s*((?:matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(?:.+?)\s*\))[\s,]*/,_=/[\s(),]+/;return j=function(s){var i=r(),d,x,o;d=s.split(c).filter(Boolean);for(var M=d.length-1;M>=0;M--)if(o=d[M].split(_).filter(Boolean),!(o.length<2))switch(x=o.shift(),l[x]&&(o=o.map(parseFloat)),x){case"matrix":(o.length===6||o.length===4)&&i.compose(o);break;case"scale":o.length===1?i.scale(o[0],o[0]):o.length===2&&i.scale(o[0],o[1]);break;case"rotate":o.length===1?i.rotate(o[0],0,0):o.length===3&&i.rotate(o[0],o[1],o[2]);break;case"translate":o.length===1?i.translate(o[0],0):o.length===2&&i.translate(o[0],o[1]);break;case"skewX":o.length===1&&i.skewX(o[0]);break;case"skewY":o.length===1&&i.skewY(o[0]);break}return i},j}var tt,ft;function wt(){if(ft)return tt;ft=1;var r=Math.PI*2;function l(n,s,i,d){var x=n*d-s*i<0?-1:1,o=n*i+s*d;return o>1&&(o=1),o<-1&&(o=-1),x*Math.acos(o)}function c(n,s,i,d,x,o,M,v,k,z){var t=z*(n-i)/2+k*(s-d)/2,e=-k*(n-i)/2+z*(s-d)/2,h=M*M,p=v*v,f=t*t,u=e*e,a=h*p-h*u-p*f;a<0&&(a=0),a/=h*u+p*f,a=Math.sqrt(a)*(x===o?-1:1);var m=a*M/v*e,y=a*-v/M*t,w=z*m-k*y+(n+i)/2,C=k*m+z*y+(s+d)/2,X=(t-m)/M,Y=(e-y)/v,R=(-t-m)/M,P=(-e-y)/v,b=l(1,0,X,Y),E=l(X,Y,R,P);return o===0&&E>0&&(E-=r),o===1&&E<0&&(E+=r),[w,C,b,E]}function _(n,s){var i=1.3333333333333333*Math.tan(s/4),d=Math.cos(n),x=Math.sin(n),o=Math.cos(n+s),M=Math.sin(n+s);return[d,x,d-x*i,x+d*i,o+M*i,M-o*i,o,M]}return tt=function(s,i,d,x,o,M,v,k,z){var t=Math.sin(z*r/360),e=Math.cos(z*r/360),h=e*(s-d)/2+t*(i-x)/2,p=-t*(s-d)/2+e*(i-x)/2;if(h===0&&p===0)return[];if(v===0||k===0)return[];v=Math.abs(v),k=Math.abs(k);var f=h*h/(v*v)+p*p/(k*k);f>1&&(v*=Math.sqrt(f),k*=Math.sqrt(f));var u=c(s,i,d,x,o,M,v,k,t,e),a=[],m=u[2],y=u[3],w=Math.max(Math.ceil(Math.abs(y)/(r/4)),1);y/=w;for(var C=0;C<w;C++)a.push(_(m,y)),m+=y;return a.map(function(X){for(var Y=0;Y<X.length;Y+=2){var R=X[Y+0],P=X[Y+1];R*=v,P*=k;var b=e*R-t*P,E=t*R+e*P;X[Y+0]=b+u[0],X[Y+1]=E+u[1]}return X})},tt}var et,lt;function kt(){if(lt)return et;lt=1;var r=Math.PI/180;function l(c,_,n,s){if(!(this instanceof l))return new l(c,_,n,s);this.rx=c,this.ry=_,this.ax=n,this.epsilon=typeof s>"u"?1e-7:+("1e"+-s)}return l.prototype.transform=function(c){var _=Math.cos(this.ax*r),n=Math.sin(this.ax*r),s=[this.rx*(c[0]*_+c[2]*n),this.rx*(c[1]*_+c[3]*n),this.ry*(-c[0]*n+c[2]*_),this.ry*(-c[1]*n+c[3]*_)],i=s[0]*s[0]+s[2]*s[2],d=s[1]*s[1]+s[3]*s[3],x=Math.sqrt(((s[0]-s[3])*(s[0]-s[3])+(s[2]+s[1])*(s[2]+s[1]))*((s[0]+s[3])*(s[0]+s[3])+(s[2]-s[1])*(s[2]-s[1]))),o=(i+d)/2;if(x<=this.epsilon)return this.rx=this.ry=Math.sqrt(o),this.ax=0,this;if(Math.abs(x-Math.abs(i-d))<=this.epsilon)return this.rx=Math.sqrt(i),this.ry=Math.sqrt(d),this.ax=0,this;var M=s[0]*s[1]+s[2]*s[3],v=o+x/2,k=o-x/2;return Math.abs(M)<=this.epsilon&&Math.abs(v-d)<=this.epsilon?(this.ax=0,this.rx=Math.sqrt(k),this.ry=Math.sqrt(v),this):(this.ax=Math.atan(Math.abs(M)>Math.abs(v-d)?(v-i)/M:M/(v-d))/r,this.ax>=0?(this.rx=Math.sqrt(v),this.ry=Math.sqrt(k)):(this.ax+=90,this.rx=Math.sqrt(k),this.ry=Math.sqrt(v)),this)},l.prototype.isDegenerate=function(){return Math.abs(this.rx)<=this.epsilon||Math.abs(this.ry)<=this.epsilon},l.prototype.normalise=function(c,_){if(this.rx=Math.abs(this.rx),this.ry=Math.abs(this.ry),Math.abs(this.rx-this.ry)<=this.epsilon)this.ax=0,this.rx=this.ry=(this.rx+this.ry)/2;else if(this.ax=this.ax%180,this.ax<0&&(this.ax+=180),this.ax>=90){var n;n=this.rx,this.rx=this.ry,this.ry=n,this.ax=this.ax-90}if(!c&&!_)return this;var s=Math.cos(this.ax*r),i=Math.sin(-this.ax*r),d=(c*s-_*i)/this.rx,x=(c*i+_*s)/this.ry,o=Math.sqrt(d*d+x*x);return o>1&&(this.rx*=o,this.ry*=o),this},et=l,et}var rt,mt;function Tt(){if(mt)return rt;mt=1;function r(n){if(!(this instanceof r))return new r(n);if(n&&n.constructor===String){var s=n.trim().split(/\s+/).map(parseFloat);this.addX(s[0]).addX(s[0]+s[2]).addY(s[1]).addY(s[1]+s[3])}return this}r.prototype.copy=function(){var n=new r;return n.minX=this.minX,n.minY=this.minY,n.maxX=this.maxX,n.maxY=this.maxY,n},r.prototype.width=function(){return typeof this.minX>"u"?0:this.maxX-this.minX},r.prototype.height=function(){return typeof this.minY>"u"?0:this.maxY-this.minY},r.prototype.isUndefined=function(){return typeof this.minX>"u"||typeof this.minY>"u"},r.prototype.addX=function(n){return typeof this.minX>"u"?this.minX=this.maxX=n:(this.minX=Math.min(this.minX,n),this.maxX=Math.max(this.maxX,n)),this},r.prototype.addY=function(n){return typeof this.minY>"u"?this.minY=this.maxY=n:(this.minY=Math.min(this.minY,n),this.maxY=Math.max(this.maxY,n)),this},r.prototype.addPoint=function(n,s){return this.addX(n).addY(s)};function l(n){var s=Math.min(n[0],n[2]),i=Math.max(n[0],n[2]);if(n[1]>n[0]?n[2]>=n[1]:n[2]<=n[1])return[s,i];var d=(n[0]*n[2]-n[1]*n[1])/(n[0]-2*n[1]+n[2]);return d<s?[d,i]:[s,d]}r.prototype.addXQ=function(n){var s=l(n);return this.addX(s[0]).addX(s[1])},r.prototype.addYQ=function(n){var s=l(n);return this.addY(s[0]).addY(s[1])};var c=1e-8;function _(n){var s=n[0]-3*n[1]+3*n[2]-n[3];if(Math.abs(s)<c)return l([n[0],-.5*n[0]+1.5*n[1],n[0]-3*n[1]+3*n[2]]);var i=-n[0]*n[2]+n[0]*n[3]-n[1]*n[2]-n[1]*n[3]+n[1]*n[1]+n[2]*n[2];if(i<=0)return[Math.min(n[0],n[3]),Math.max(n[0],n[3])];for(var d=Math.sqrt(i),x=Math.max(n[0],n[3]),o=Math.min(n[0],n[3]),M=n[0]-2*n[1]+n[2],v=(M+d)/s,k=1;k<=2;v=(M-d)/s,k++)if(v>0&&v<1){var z=n[0]*(1-v)*(1-v)*(1-v)+n[1]*3*(1-v)*(1-v)*v+n[2]*3*(1-v)*v*v+n[3]*v*v*v;z<o&&(o=z),z>x&&(x=z)}return[o,x]}return r.prototype.addXC=function(n){var s=_(n);return this.addX(s[0]).addX(s[1])},r.prototype.addYC=function(n){var s=_(n);return this.addY(s[0]).addY(s[1])},r.prototype.toArray=function(){return this.isUndefined()?[0,0,0,0]:[this.minX,this.minY,this.maxX,this.maxY]},r.prototype.toString=function(n){return this.isUndefined()?"0 0 0 0":(typeof n>"u"?[this.minX,this.minY,this.width(),this.height()]:[this.minX.toFixed(n),this.minY.toFixed(n),this.width().toFixed(n),this.height().toFixed(n)]).join(" ")},r.prototype.inboxMatrix=function(n){var s=new r(n.match(/(-|\d|\.|\s)+/)[0]),i=(n+"meet").match(/(fit|none|meet|slice|move)/)[0];i==="none"&&(i="fit");var d,x;switch(i){case"fit":d=this.width()?s.width()/this.width():1,x=this.height()?s.height()/this.height():1;break;case"slice":if(this.width()!==0&&this.height()!==0){d=x=Math.max(s.width()/this.width(),s.height()/this.height());break}case"meet":d=x=this.width()===0&&this.height()===0?1:Math.min(s.width()/this.width(),s.height()/this.height());break;case"move":d=x=1;break}var o={};o.X=(n+"xMid").match(/x(Min|Mid|Max)/i)[1].toLowerCase(),o.Y=(n+"YMid").match(/Y(Min|Mid|Max)/i)[1].toLowerCase();var M={},v={};v.src=this,v.dst=s;for(var k="X",z=1;z<=2;k="Y",z++)for(var t="src",e=1;e<=2;t="dst",e++)switch(o[k]){case"min":M[t+k]=v[t]["min"+k];break;case"mid":M[t+k]=(v[t]["min"+k]+v[t]["max"+k])/2;break;case"max":M[t+k]=v[t]["max"+k];break}return[d,0,0,x,M.dstX-d*M.srcX,M.dstY-x*M.srcY]},rt=r,rt}var at,dt;function Ct(){if(dt)return at;dt=1;var r=xt(),l=bt(),c=ut(),_=wt(),n=kt(),s=Tt();function i(t){if(!(this instanceof i))return new i(t);var e=r(t);this.segments=e.segments,this.errs=e.errs,this.affineTransform=c()}i.prototype.precision=7,i.prototype.copy=function(){for(var t=new i(""),e=0,h=this.segments.length;e<h;e++)t.segments[e]=this.segments[e].slice(0);return t.errs=this.errs,t.affineTransform=this.affineTransform.copy(),t},i.prototype.hasErrors=function(){return this.errs.length>0},i.prototype.errors=function(){var t=[],e=this.errs.length,h;for(h=0;h<e;h++)t.push("[pos:"+this.errs[h].position+", seg:"+this.errs[h].segment+"] "+this.errs[h].message);return t.join(`
`)},i.prototype.toArray=function(t){return t=!!t,this.doTransform().round(this.precision),t&&this.hasErrors()?this.segments.concat.apply([],this.segments.slice(0,this.errs[0].segment-1)):this.segments.concat.apply([],this.segments)};function d(t,e){if(t.length<=1)return null;var h=[0,0],p;switch(t[0]){case"h":case"H":h[0]=t[1],h[1]=t[0]==="h"?0:e[1];break;case"v":case"V":h[0]=t[0]==="v"?0:e[0],h[1]=t[1];break;default:p=t.length-2,h[0]=t[p],h[1]=t[p+1]}return t[0]===t[0].toLowerCase()&&(h[0]+=e[0],h[1]+=e[1]),h}i.prototype.iterate=function(t){var e=this,h=this.segments,p=[],f=[],u=[0,0],a=[0,0];if(h.forEach(function(w,C){var X=u[0],Y=u[1],R;w[0]==="z"||w[0]==="Z"?u=a.slice():(u=d(w,u),(w[0]==="m"||w[0]==="M")&&(a=u.slice())),R=t.call(e,w,C,X,Y),Array.isArray(R)&&(p[C]=R)}),p.length===0)return this;for(var m=0,y=h.length;m<y;m++)typeof p[m]<"u"?f.push.apply(f,p[m]):f.push(h[m]);return this.segments=f,this};function x(t,e){t.iterate(function(h,p,f,u){var a,m,y,w;switch(h[0]){case"v":a=e.calc(0,h[1],!0),m=e.preserveV()?["v",a[1]]:["l",a[0],a[1]];break;case"V":a=e.calc(f,h[1],!1),m=e.preserveV()?["V",a[1]]:["L",a[0],a[1]];break;case"h":a=e.calc(h[1],0,!0),m=e.preserveH()?["h",a[0]]:["l",a[0],a[1]];break;case"H":a=e.calc(h[1],u,!1),m=e.preserveH()?["H",a[0]]:["L",a[0],a[1]];break;case"a":case"A":var C=n(h[1],h[2],h[3],this.precision).transform(e.toArray());a=e.calc(h[6],h[7],h[0]==="a"),C.isDegenerate()?m=[h[0]==="a"?"l":"L",a[0],a[1]]:(e.det()<0&&(h[5]=h[5]?0:1),m=[h[0],C.rx,C.ry,C.ax,h[4],h[5],a[0],a[1]]);break;default:y=h[0],m=[y],w=y.toLowerCase()===y&&p;for(var X=1,Y=h.length;X<Y;X+=2)a=e.calc(h[X],h[X+1],w),m.push(a[0],a[1])}return[m]})}i.prototype.doTransform=function(){return this.affineTransform.isIdentity()?this:(x(this,this.affineTransform),this.affineTransform.reset(),this)},i.prototype.translate=function(t,e){return this.affineTransform.translate(t,e||0),this},i.prototype.scale=function(t,e){return this.affineTransform.scale(t,isNaN(e)?t:e),this},i.prototype.rotate=function(t,e,h){return this.affineTransform.rotate(t,e||0,h||0),this},i.prototype.skewX=function(t){return this.affineTransform.skewX(t),this},i.prototype.skewY=function(t){return this.affineTransform.skewY(t),this},i.prototype.matrix=function(t){return this.affineTransform.compose(t),this},i.prototype.transform=function(t){return t.trim()?(this.affineTransform.compose(l(t)),this):this};function o(t,e){return e=~~e,e===0?Math.round(t):(t=+t,isNaN(t)?NaN:(t=t.toString().split("e"),t=Math.round(+t[0]+"e"+(~~t[1]+e)),t=t.toString().split("e"),+(t[0]+"e"+(~~t[1]-e))))}i.prototype.round=function(t){this.precision=t=~~t;var e=0,h=0,p=0,f=0;return this.doTransform(),this.segments.forEach(function(u){var a=u[0].toLowerCase()===u[0],m,y,w;switch(u[0]){case"H":case"h":a&&(u[1]+=p),m=u[1],u[1]=o(m,t),p=m-u[1];return;case"V":case"v":a&&(u[1]+=f),y=u[1],u[1]=o(y,t),f=y-u[1];return;case"Z":case"z":p=e,f=h;return;case"A":case"a":u[1]=o(u[1],t),u[2]=o(u[2],t),u[3]=o(u[3],t+2),a&&(u[6]+=p,u[7]+=f),m=u[6],y=u[7],u[6]=o(m,t),u[7]=o(y,t),p=m-u[6],f=y-u[7];return;default:for(w=u.length-3,a&&(u[w+1]+=p,u[w+2]+=f),m=u[w+1],y=u[w+2],u[w+1]=o(m,t),u[w+2]=o(y,t),p=m-u[w+1],f=y-u[w+2];w>0;w--)u[w]=o(u[w],t);u[0].toLowerCase()==="m"&&(e=p,h=f);return}}),this},i.prototype.abs=function(){return this.iterate(function(t,e,h,p){var f=t[0],u=f.toUpperCase();if(f!==u)switch(t[0]=u,f){case"v":t[1]+=p;return;case"a":t[6]+=h,t[7]+=p;return;default:for(var a=1,m=t.length;a<m;a++)t[a]+=a%2?h:p}}),this},i.prototype.rel=function(){return this.iterate(function(t,e,h,p){var f=t[0],u=f.toLowerCase();if(f!==u&&!(e===0&&f==="M"))switch(t[0]=u,f){case"V":t[1]-=p;return;case"A":t[6]-=h,t[7]-=p;return;default:for(var a=1,m=t.length;a<m;a++)t[a]-=a%2?h:p}}),this},i.prototype.unarc=function(){return this.iterate(function(t,e,h,p){var f,u,a,m=[],y=t[0];return y!=="A"&&y!=="a"?null:(y==="a"?(u=h+t[6],a=p+t[7]):(u=t[6],a=t[7]),f=_(h,p,u,a,t[4],t[5],t[1],t[2],t[3]),f.forEach(function(w){m.push(["C",w[2],w[3],w[4],w[5],w[6],w[7]])}),m)}),this},i.prototype.unshort=function(){var t=this.segments,e,h,p,f,u;return this.iterate(function(a,m,y,w){var C=a[0],X=C.toUpperCase(),Y;m&&(X==="T"?(Y=C==="t",p=t[m-1],p[0]==="Q"?(e=p[1]-y,h=p[2]-w):p[0]==="q"?(e=p[1]-p[3],h=p[2]-p[4]):(e=0,h=0),f=-e,u=-h,Y||(f+=y,u+=w),t[m]=[Y?"q":"Q",f,u,a[1],a[2]]):X==="S"&&(Y=C==="s",p=t[m-1],p[0]==="C"?(e=p[3]-y,h=p[4]-w):p[0]==="c"?(e=p[3]-p[5],h=p[4]-p[6]):(e=0,h=0),f=-e,u=-h,Y||(f+=y,u+=w),t[m]=[Y?"c":"C",f,u,a[1],a[2],a[3],a[4]]))}),this},i.prototype.reverse=function(){var t=0,e=0,h,p;this.unshort(),this.segments.push(["M",0,0]),this.iterate(function(a,m,y,w){var C=a[0];if(!m&&C.toUpperCase()==="M")return t=a[1],e=a[2],[];switch(C){case"M":t=a[1],e=a[2],a[1]=y,a[2]=w;break;case"L":a[1]=y,a[2]=w;break;case"m":t=y+a[1],e=w+a[2],a[1]=-a[1],a[2]=-a[2];break;case"l":a[1]=-a[1],a[2]=-a[2];break;case"H":a[1]=y;break;case"h":a[1]=-a[1];break;case"V":a[1]=w;break;case"v":a[1]=-a[1];break;case"Z":a[1]=y,a[2]=w;break;case"z":a[1]=y-t,a[2]=w-e;break;case"Q":a[3]=y,a[4]=w;break;case"q":a[1]-=a[3],a[2]-=a[4],a[3]=-a[3],a[4]=-a[4];break;case"C":a[5]=y,a[6]=w,h=a[3],p=a[4],a[3]=a[1],a[4]=a[2],a[1]=h,a[2]=p;break;case"c":h=a[1],p=a[2],a[1]=a[3]-a[5],a[2]=a[4]-a[6],a[3]=h-a[5],a[4]=p-a[6],a[5]=-a[5],a[6]=-a[6];break;case"A":a[6]=y,a[7]=w,a[5]=a[5]?0:1;break;case"a":a[6]=-a[6],a[7]=-a[7],a[5]=a[5]?0:1;break}}),this.segments.reverse();var f=!1,u=!1;return this.iterate(function(a,m,y,w){var C=null;switch(a[0]){case"z":a[0]="l",C=f?[["z"],["l",a[1],a[2]]]:u?null:[["m",0,0],["l",a[1],a[2]]],f=!0;break;case"Z":a[0]="L",C=f?[["Z"],["L",a[1],a[2]]]:u?null:[["m",0,0],["L",a[1],a[2]]],f=!0;break;case"m":C=f?[["z"],["m",a[1],a[2]]]:null,f=!1,u=!0;break;case"M":C=f?[["Z"],["M",a[1],a[2]]]:null,f=!1,u=!0;break;default:u=!1,C=null;break}return C}),f&&this.segments.push(["Z"]),this};function M(t,e){var h=d(t,e);if(t[0]==="z"||t[0]==="Z"||h[0]!==e[0]||h[1]!==e[1])return!1;switch(t[0]){case"c":return t[1]===0&&t[2]===0&&t[3]===0&&t[4]===0;case"C":return t[1]===e[0]&&t[2]===e[1]&&t[3]===e[0]&&t[4]===e[1];case"s":case"q":return t[1]===0&&t[2]===0;case"S":case"Q":return t[1]===e[0]&&t[2]===e[1]}return!0}function v(t,e){return t&&(t[0]==="S"||t[0]==="s"||t[0]==="T"||t[0]==="t")}i.prototype.normalize_first_m=!0,i.prototype.normalize_remove_empty=!0,i.prototype.normalize_smash_m=!0,i.prototype.normalize_smash_z=!0,i.prototype.normalize_a2l=!0,i.prototype.normalize_arc_ellipse=!0,i.prototype.normalize_arc_flags=!1,i.prototype.parseNormalizeFlags=function(t){if(typeof t=="string"){var e;e=t.match(/[Ff]/),e&&(this.normalize_first_m=e[0]==="F"),e=t.match(/[Ee]/),e&&(this.normalize_remove_empty=e[0]==="E"),e=t.match(/[Mm]/),e&&(this.normalize_smash_m=e[0]==="M"),e=t.match(/[Zz]/),e&&(this.normalize_smash_z=e[0]==="Z"),e=t.match(/[Ll]/),e&&(this.normalize_a2l=e[0]==="L"),e=t.match(/[Ee]/),e&&(this.normalize_arc_ellipse=e[0]==="E"),e=t.match(/[Gg]/),e&&(this.normalize_arc_flags=e[0]==="G")}},i.prototype.normalize=function(t){this.parseNormalizeFlags(t);var e=null,h,p,f,u,a=this.segments;return this.iterate(function(m,y,w,C){if(y===0)return this.normalize_first_m&&m[0]==="m"&&(m[0]="M"),e=m,null;if(p=m[0].toLowerCase(),f=e&&e[0].toLowerCase(),h=d(m,[w,C]),this.normalize_remove_empty&&p!=="m"&&M(m,[w,C])){if(!v(a[y+1]))return[];if(p==="c"||p==="s"||p==="q"||p==="t"||p==="a")return p===m[0]?(m[0]="l",m[1]=m[2]=0):(m[0]="L",m[1]=h[0],m[2]=h[1]),m.splice(3),null}if(this.normalize_smash_m&&e&&f==="m"&&p==="m")return e[0]="M",e[1]=h[0],e[2]=h[1],[];if(this.normalize_smash_z&&e&&f==="z"&&p==="z")return[];if(p==="a"){if(u=n(m[1],m[2],m[3],this.precision),this.normalize_a2l&&u.isDegenerate())return m[0]=m[0]===p?"l":"L",m[1]=m[6],m[2]=m[7],m.splice(3),e=m,null;this.normalize_arc_ellipse&&(u.normalise((h[0]-w)/2,(h[1]-C)/2),m[1]=u.rx,m[2]=u.ry,m[3]=u.ax),this.normalize_arc_flags&&(m[4]=m[4]?1:0,m[5]=m[5]?1:0)}return e=m,null}),this},i.prototype.normalize_before_tostring=!0,i.prototype.leading_zeros=0,i.prototype.trailing_zeros=0,i.prototype.coordinate_separator="",i.prototype.zip_space_before_command=!0,i.prototype.zip_space_after_command=!0,i.prototype.zip_space_after_z=!0,i.prototype.zip_space_before_minus=!0,i.prototype.zip_space_before_dot=!1,i.prototype.zip_space_use_e=!1,i.prototype.zip_remove_repeats=!0,i.prototype.zip_remove_l_after_m=!1,i.prototype.parseOutputFormat=function(t){if(typeof t=="string"){var e;e=t.match(/[+-]/),e&&(t+=e[0]==="+"?"BAZMDERL":"bazmderl"),e=t.match(/[Bb]/),e&&(this.zip_space_before_command=e[0]==="B"),e=t.match(/[Aa]/),e&&(this.zip_space_after_command=e[0]==="A"),e=t.match(/[Zz]/),e&&(this.zip_space_after_z=e[0]==="Z"),e=t.match(/[Mm]/),e&&(this.zip_space_before_minus=e[0]==="M"),e=t.match(/[Dd]/),e&&(this.zip_space_before_dot=e[0]==="D"),e=t.match(/[Ee]/),e&&(this.zip_space_use_e=e[0]==="E"),e=t.match(/[Rr]/),e&&(this.zip_remove_repeats=e[0]==="R"),e=t.match(/[Ll]/),e&&(this.zip_remove_l_after_m=e[0]==="L"),e=t.match(/\s?,\s?/),e&&(this.coordinate_separator=e[0]),e=t.match(/(?:0*\.[0X]*|0+)/),e&&(e=e[0].split("."),this.leading_zeros=e[0].length,e.length>1&&(this.precision=Math.min(e[1].length,20),this.trailing_zeros=e[1].split("X")[0].length))}};function k(t,e){for(;t.length<e;)t="0"+t;return t}function z(t,e){for(;t.length<e;)t+="0";return t}return i.prototype.numToString=function(t,e){t=o(t,this.precision);var h=e||this.zip_space_before_minus&&t<0?"":" ",p="";t<0&&(p="-",t=-t);var f=t.toFixed(this.precision).split(".");if(typeof f[1]!="string"&&(f[1]=""),f[1]=f[1].replace(/0*$/,""),f[0]==="0"&&f[1]&&(f[0]=""),this.zip_space_use_e){var u,a;f[1]?f[0]||(a=+f[1]+"e"+-f[1].length,a.length<f[1].length+1&&(f[0]=a,f[1]="")):(a=f[0],u=a.match(/0*$/)[0].length,u>2&&(f[0]=a.slice(0,-u)+"e"+u))}else f[0]=k(f[0],this.leading_zeros),f[1]=z(f[1],this.trailing_zeros);return h+p+f[0]+(f[1]?"."+f[1]:"")},i.prototype.coordsToString=function(t,e,h){return this.numToString(t,h)+this.coordinate_separator+this.numToString(e,this.coordinate_separator)},i.prototype.toString=function(t,e,h){typeof t=="boolean"&&(t=t?"+":"-"),typeof t=="string"&&this.parseOutputFormat(t),h=!!h,typeof e>"u"&&(e=this.normalize_before_tostring),e&&this.normalize(),this.doTransform().round(this.precision);for(var p="",f=!1,u,a=0,m=h&&this.hasErrors()?this.errs[0].segment-1:this.segments.length,y=this.segments[0],w=null;a<m;w=!this.zip_remove_l_after_m||u!=="m"?y[0]:y[0]==="M"?"L":"l",y=this.segments[++a])switch(u=y[0].toLowerCase(),f=!this.zip_remove_repeats||y[0]!==w,f&&(this.zip_space_before_command||(p+=" "),p+=y[0],(!this.zip_space_after_command&&u!=="z"||u==="z"&&!this.zip_space_after_z&&this.zip_space_before_command)&&(p+=" ")),u){case"h":case"v":p+=this.numToString(y[1],f);break;case"a":p+=this.coordsToString(y[1],y[2],f)+this.numToString(y[3])+this.coordsToString(y[4],y[5])+this.coordsToString(y[6],y[7]);break;case"z":break;default:for(var C=1,X=y.length,Y=f;C<X;C+=2,Y=!1)p+=this.coordsToString(y[C],y[C+1],Y);break}return this.zip_space_before_dot&&this.leading_zeros===0?p.trim().replace(/(\.\d+) 0?(?=\.)/g,"$1"):p.trim()},i.prototype.toBox=function(){var t=s();if(this.segments.length===0)return t;var e=this.copy().abs().unarc().unshort().doTransform();return e.iterate(function(h,p,f,u){switch(h[0]){case"H":t.addX(h[1]);break;case"V":t.addY(h[1]);break;case"M":case"L":t.addX(h[1]),t.addY(h[2]);break;case"Q":t.addXQ([f,h[1],h[3]]),t.addYQ([u,h[2],h[4]]);break;case"C":t.addXC([f,h[1],h[3],h[5]]),t.addYC([u,h[2],h[4],h[6]]);break}}),t.minX=o(t.minX,this.precision),t.minY=o(t.minY,this.precision),t.maxX=o(t.maxX,this.precision),t.maxY=o(t.maxY,this.precision),t},i.prototype.toBoxString=function(t){this.parseOutputFormat(t);var e=this.toBox();return[this.numToString(e.minX,!0),this.numToString(e.minY,!0),this.numToString(e.width(),!0),this.numToString(e.height(),!0)].join(" ")},i.prototype.inbox=function(t){return typeof t!="string"&&(t=Array.prototype.join.call(arguments," ")),this.matrix(this.toBox().inboxMatrix(t)),this},at=i,at}var it,_t;function zt(){return _t||(_t=1,it=Ct()),it}var Yt=zt(),Et=Mt(Yt);function W(r,l,c,_,n=!0){if(l<=0)throw new Error("Radius must be > 0");let s=c.x-r.x,i=c.y-r.y;const d=Math.hypot(s,i);if(d===0)throw new Error("Start point cannot equal center");Math.abs(d-l)>1e-9&&(s*=l/d,i*=l/d);const x=Math.atan2(-i,s);let o=_/l,M=n;o<0&&(o=-o,M=!M);const v=M?x-o:x+o,k=r.x+l*Math.cos(v),z=r.y-l*Math.sin(v);return{x:k,y:z,theta:v}}function Z(r,l=1,c=!0){const _=c?1:-1,{x:n,y:s,theta:i}=r,d={x:n,y:s},x={x:n+_*l*Math.cos(i),y:s-_*l*Math.sin(i)};return{start:d,end:x}}function A(r,l,c,_,n=10,s=!1){const i={x:c.x+n*Math.cos(_),y:c.y-n*Math.sin(_)};r.save(),r.translate(i.x,i.y),s&&r.rotate(-_),r.textAlign="center",r.textBaseline=l==="0"?"top":"middle",r.fillText(l,0,0),r.restore()}const H=(r,l,c)=>{const _=Math.cos,n=Math.sin,s={x:0,y:0},i={x:r*-n(c/2),y:r*_(c/2)},d={x:r*n(c/2),y:r*_(c/2)},x={x:l*-n(c/2),y:l*_(c/2)},o={x:l*n(c/2),y:l*_(c/2)},M={x:i.x,y:r},v={x:d.x,y:r},k={x:i.x,y:x.y},z={x:d.x,y:x.y},t=C=>{const X=R=>R+Math.abs(i.x),Y=R=>r-R;return{x:X(C.x),y:Y(C.y)}},e=t(i),h=t(d),p=t(x),f=t(o),u=t(M),a=t(v),m=t(k),y=t(z),w=t(s);return{At:e,Bt:h,Ct:p,Dt:f,TLt:u,TRt:a,BLt:m,BRt:y,CENTERt:w}},gt=(r,l,c)=>{const _=H(r,l,c),n=`M ${_.Bt.x} ${_.Bt.y}`,s=`A ${r} ${r} 0 0 0 ${_.At.x} ${_.At.y}`,i=`L  ${_.Ct.x} ${_.Ct.y}`,d=`A ${l} ${l} 0  0  1  ${_.Dt.x} ${_.Dt.y}`;return[n,s,i,d,"Z"].join(" ")},nt=(r,l,c)=>{console.log("[ConesCalcV3.WORKER] drawRuler started",{model:l,units:c});const{width:_,height:n}=r.canvas,s={width:_,height:n},i=Q({...l,gap_angle:0}),d={x:0,y:0,width:s.width,height:s.height},x=ot(d,i,"xMin","YMin"),o=x.width/i.width,M={top_diameter:l.top_diameter*o,height:l.height*o,bottom_diameter:l.bottom_diameter*o,gap_angle:l.gap_angle},v=Q({...M,gap_angle:0});v.width=Math.round(v.width),v.height=Math.round(v.height);const k=Q(M);k.width=Math.round(k.width),k.height=Math.round(k.height);const z=ot(d,v,"xMin","YMin");let{R:t,r:e,fi_rad:h,gap_rad:p}=K(l),{R:f,r:u}=K(M);f=Math.round(f),u=Math.round(u);const a=gt(f,u,h),m=gt(f,u,h-p);if(!st(a)||!st(m))return;const y=Et(a).inbox(`0 0 ${z.width} ${z.height} meet xMinYMin`).round(0).toString();console.log("[ConesCalcV3.WORKER] cone bounds",{R_px:f,r_px:u,scaleFactor:o,canvasSize:s,full_fit:x,scaled_fit:z,full_bounds:i,full_bounds_px:v,segment_bounds_px:k,full_path_px:a,segment_path_px:m,full_transformed:y}),r.clearRect(0,0,s.width,s.height),r.save(),r.strokeStyle="gray",r.lineWidth=1;const w=new Path2D(y);r.fillStyle="white",r.fill(w),r.stroke(w),r.restore();const C=f*h,X=u*h,Y=t*h,R=e*h;console.log("[ConesCalcV3.WORKER] cone ruler",{top_arc_length_px:C,bottom_arc_length_px:X,top_arc_length:Y,bottom_arc_length:R,scaleFactor:o});const P=H(t,e,h);if(c==="mm"){const b=[],E=[],$=[],D=[],N=Math.floor(Y/1)+1,S=Math.floor(R/1)+1;Array.from({length:N+1}).map((g,T)=>T).map(g=>{const T=W(P.CENTERt,t,P.At,g*1),q=g%10?g%5?1:2:3,I=Z(T,q,!1);b.push(T),$.push(I)}),Array.from({length:S+1}).map((g,T)=>T).map(g=>{const T=W(P.CENTERt,e,P.At,g*1),q=g%10?g%5?1:2:3,I=Z(T,q,!0);E.push(T),D.push(I)});const L=b.map(g=>({x:Math.round(g.x*o),y:Math.round(g.y*o),theta:g.theta})),F=E.map(g=>({x:Math.round(g.x*o),y:Math.round(g.y*o),theta:g.theta})),V=$.map(g=>({start:{x:Math.round(g.start.x*o),y:Math.round(g.start.y*o)},end:{x:Math.round(g.end.x*o),y:Math.round(g.end.y*o)}})),O=D.map(g=>({start:{x:Math.round(g.start.x*o),y:Math.round(g.start.y*o)},end:{x:Math.round(g.end.x*o),y:Math.round(g.end.y*o)}}));if(console.log("[ConesCalcV3.WORKER] cone ticks mm",{top_mm_points:b,bottom_mm_points:E,top_mm_ticks:$,bottom_mm_ticks:D}),console.log("[ConesCalcV3.WORKER] cone ticks px",{top_px_points:L,bottom_px_points:F,top_px_ticks:V,bottom_px_ticks:O}),r===null)return;r.save(),r.lineWidth=1,r.strokeStyle="gray",Array.from({length:N}).map((g,T)=>T).map(g=>{const T=V[g];r.beginPath(),r.moveTo(T.start.x,T.start.y),r.lineTo(T.end.x,T.end.y),r.stroke(),r.closePath();const q=b[g];!(g%10)&&A(r,`${g}`,T.end,q.theta,-10,!0)}),Array.from({length:S}).map((g,T)=>T).map(g=>{const T=O[g];r.beginPath(),r.moveTo(T.start.x,T.start.y),r.lineTo(T.end.x,T.end.y),r.stroke(),r.closePath();const q=F[g];!(g%10)&&A(r,`${g}`,T.end,q.theta,10,!0)}),r.restore()}if(c==="in"){const b=[],E=[],$=[],D=[],N=Math.floor(Y/.1)+1,S=Math.floor(R/.1)+1;console.log("[ConesCalcV3.WORKER] ruler inches",{top_arc_length:Y,bottom_arc_length:R}),Array.from({length:N+1}).map((g,T)=>T).map(g=>{const T=W(P.CENTERt,t,P.At,g*.1),q=g%10?g%5?.1:.15:.2,I=Z(T,q,!1);b.push(T),$.push(I)}),Array.from({length:S+1}).map((g,T)=>T).map(g=>{const T=W(P.CENTERt,e,P.At,g*.1),q=g%10?g%5?.1:.15:.2,I=Z(T,q,!0);E.push(T),D.push(I)});const L=b.map(g=>({x:Math.round(g.x*o),y:Math.round(g.y*o),theta:g.theta})),F=E.map(g=>({x:Math.round(g.x*o),y:Math.round(g.y*o),theta:g.theta})),V=$.map(g=>({start:{x:Math.round(g.start.x*o),y:Math.round(g.start.y*o)},end:{x:Math.round(g.end.x*o),y:Math.round(g.end.y*o)}})),O=D.map(g=>({start:{x:Math.round(g.start.x*o),y:Math.round(g.start.y*o)},end:{x:Math.round(g.end.x*o),y:Math.round(g.end.y*o)}}));if(console.log("[ConesCalcV3.WORKER] cone ticks in",{top_in_points:b,bottom_in_points:E,top_in_ticks:$,bottom_in_ticks:D}),console.log("[ConesCalcV3.WORKER] cone ticks px",{top_px_points:L,bottom_px_points:F,top_px_ticks:V,bottom_px_ticks:O}),r===null)return;r.save(),r.lineWidth=1,r.strokeStyle="gray",Array.from({length:N}).map((g,T)=>T).map(g=>{g%5?(r.strokeStyle="gray",r.lineWidth=1):(r.strokeStyle="black",r.lineWidth=1);const T=V[g];r.beginPath(),r.moveTo(T.start.x,T.start.y),r.lineTo(T.end.x,T.end.y),r.stroke(),r.closePath();const q=b[g];!(g%10)&&A(r,`${g/10}`,T.end,q.theta,-10,!0)}),Array.from({length:S}).map((g,T)=>T).map(g=>{const T=O[g];g%5?(r.strokeStyle="gray",r.lineWidth=1):(r.strokeStyle="black",r.lineWidth=1),r.beginPath(),r.moveTo(T.start.x,T.start.y),r.lineTo(T.end.x,T.end.y),r.stroke(),r.closePath();const q=F[g];!(g%10)&&A(r,`${g/10}`,T.end,q.theta,10,!0)}),r.restore()}if(p>0){const b=H(f,u,h-p),E=(v.width-k.width)/2;b.At.x=Math.round(b.At.x+E),b.Bt.x=Math.round(b.Bt.x+E),b.Ct.x=Math.round(b.Ct.x+E),b.Dt.x=Math.round(b.Dt.x+E),b.TLt.x=Math.round(b.TLt.x+E),b.TRt.x=Math.round(b.TRt.x+E),b.BLt.x=Math.round(b.BLt.x+E),b.BRt.x=Math.round(b.BRt.x+E),b.CENTERt.x=Math.round(b.CENTERt.x+E),b.At.y=Math.round(b.At.y),b.Bt.y=Math.round(b.Bt.y),b.Ct.y=Math.round(b.Ct.y),b.Dt.y=Math.round(b.Dt.y),b.TLt.y=Math.round(b.TLt.y),b.TRt.y=Math.round(b.TRt.y),b.BLt.y=Math.round(b.BLt.y),b.BRt.y=Math.round(b.BRt.y),b.CENTERt.y=Math.round(b.CENTERt.y),console.log("[ConesCalcV3.WORKER] cone segment",{shift_x:E,segment_shape_points_px:b}),r.save(),r.lineWidth=1,r.strokeStyle="blue",r.beginPath(),r.moveTo(b.Bt.x,b.Bt.y),r.lineTo(b.Dt.x,b.Dt.y),r.stroke(),r.closePath(),r.beginPath(),r.moveTo(b.At.x,b.At.y),r.lineTo(b.Ct.x,b.Ct.y),r.stroke(),r.closePath(),r.restore()}if(c==="mm"||c==="in"){const b=[],E=[],D=Y/36,U=R/36,N=H(t,e,h);r.save(),r.restore(),Array.from({length:37}).map((S,L)=>L).map(S=>{const L=W(N.CENTERt,t,N.At,S*D);b.push(L)}),Array.from({length:37}).map((S,L)=>L).map(S=>{const L=W(N.CENTERt,e,N.At,S*U);E.push(L)}),r.save(),Array.from({length:37}).map((S,L)=>L).map(S=>{const L={x:E[S].x*o,y:E[S].y*o},F={x:b[S].x*o,y:b[S].y*o};r.beginPath();const V=new Path2D;V.moveTo(L.x,L.y),V.lineTo(F.x,F.y),r.strokeStyle="#dedede",r.lineWidth=1,r.stroke(V),r.closePath()}),r.restore(),console.log("[draFolderConev3] arc deg:",{full_shape_points:N,top_part_length:D,bottom_part_length:U,parts:36,bottom_deg_points:E,top_deg_points:b,units:c})}};let B=null;self.onmessage=function(r){console.log("[ConesCalcV3.WORKER] onmessage",r.data);const l=r.data,{printAreaProps:c,units:_,viewerType:n}=l;let s={top_diameter:c.top_radius,height:c.height,bottom_diameter:c.bottom_radius,gap_angle:yt(c.gap_angle)};switch(l.type){case"initCanvas":console.log("[ConesCalcV3.WORKER] initCanvas",r.data.type,l.viewerType);const i=l.canvas,d=l.viewportSize;i&&(B=i.getContext("2d"),console.log("[ConesCalcV3.WORKER] useEffectOnce bodyDimentions",d),i.width=d.width,i.height=d.height,B.clearRect(0,0,B.canvas.width,B.canvas.height),nt(B,s,_),postMessage({action:"canvas-init-callback",success:!0}));break;case"drawFoldedCone":if(B!==null)if(B.clearRect(0,0,B.canvas.width,B.canvas.height),l.viewerType==="full")nt(B,s,_);else{const{R:x,r:o,fi_rad:M,gap_rad:v}=K(s),k=x*(M-v)/Math.PI,z=o*(M-v)/Math.PI,t={top_diameter:k,height:c.height,bottom_diameter:z,gap_angle:0};nt(B,t,_)}break}}})();
